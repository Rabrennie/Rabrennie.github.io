<html>

<head>
	<meta name="description" content="Spookie clicker. Some say it's 2Spooky4u. Click the picture of Bill Murray to earn spookies. ">
	<title>Spookie Clicker</title>
	<link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
	<style>

	body
	{
	font-family: 'Open Sans', sans-serif;
	margin:0;
	padding:0;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: moz-none;
    -ms-user-select: none;
    user-select: none;

	}

	#maximumSpookage
	{
		color: #FFFFFF;
		width:100%;
		text-align: center;
	}

	#maximumSpookage img
	{
		visibility:hidden;
	}

	#spookySkellington
	{
		padding:0;
		margin:0;
		margin-right:auto;
		margin-left:auto;
		text-align:center;
		
	}

	#spookySkellington img
	{
		padding:0;
		padding-right: 0px;
		margin:0;
		margin-right:30;
		-webkit-border-radius: 300px;
 		-moz-border-radius: 300px; 
 		border-radius: 300px; 
 		margin-left: 50px;
 		margin-top: 50px;

	}


    #spookies
    {
		padding:0;
		margin:0;
    	margin-right:auto;
		margin-left:auto;
		text-align:center;
    	font-size: 30px;
    }
	
	#spookiesPerSecond, #spookiesPerClick
    {
		padding:0;
		margin:0;
    	margin-right:auto;
		margin-left:auto;
		text-align:center;
    	font-size: 20px;
    }
	
	#shopTitle
	{
		text-align:center;

	}

	#spookyShop
	{
		position: absolute;
		top:0;
		margin:50px;
		padding: 10px;

		text-align: center;
		width:330px;
	}

	.ghosties
	{
		position:absolute;
		margin:0;
		padding:0;
	}

	#itemNumbers
	{
		text-align: center;
		margin:50px;
		width:350px;
/*		border-left:solid 1px black;
		border-right:solid 1px black;
		border-bottom:solid 1px black;*/
		top:150px;
		position: absolute;
	}

	#container
	{
		position: absolute;
		padding: 0;
		top:120px;
		right:100px;
	}
	</style>
</head>

<body onload="load()" onunload="save()">

	<div id="spookySkellington"><img id="spookyBill" src="spookybill.jpg" width="300" height="300"/></div>
	<br />
	
	<div id="maximumSpookage"><h1>MAXIMUM SPOOKAGE</h1><br/></div>
	<div id="container">
	<div id="spookies">0 Spookies</div>
	<br />
	
	<div id="spookiesPerSecond">0 Spookies Per Second</div>
	<br />
	
	<div id="spookiesPerClick">1 Spookies Per Click</div>
	</div>
	<br />

	<div id="itemNumbers">
		<h3>You Own:</h3>
		<div id="jackOLanternNumbers">0 Jack O'Lanterns</div>
		<div id="skellingtonNumbers">0 Skellingtons</div>
		<div id="spookySpiderNumbers">0 Spooky Spiders</div>
	</div>
	<br />
	
	<div id="spookyShop">
		<div id="shopTitle"><h3>Spooky Shop</h3></div>
		<div id="jackOLanternShop">
			Buy a Jack O'Lantern for 100 Spookies
		</div>
		<div id="skellingtonShop">
			Buy a Skellington for 500 Spookies
		</div>
		<div id="spookySpiderShop">
			Buy a Spooky Spider for 700 Spookies
		</div>
	</div>
	<br />
	
	
	<div id="ghostieDiv"></div>
	<script>
		
		var spookieCount,
			items = {},
			itemsCost = {
				jackOLantern : 100,
				skellingtons : 500,
				spookySpiders : 700
			},
			multiplier = 1,
			sps = 0,
			twoSpooky = false,
			timer = 0,
			ghosties = []
			ghostiesId=0;
		
		function prettyNumbers(n)
		{
			//stolen from cookie clicker #NoShame
			var base = 0;
			var formats = 
			[
				'',
				' million',
				' billion',
				' trillion',
				' quadrillion',
				' quintillion',
				' sextillion',
				' septillion',
				' octillion',
				' nonillion',
				' decillion'
			]

			if(n >= 1000000 && isFinite(n))
			{
				n /= 1000
				while(Math.round(n) >= 1000)
				{
					n /= 1000;
					base++;
				}
				n = Math.round(n*Math.pow(10,2))/Math.pow(10,2);
				if (base > formats.length) {return 'Infinity';} else { return n + formats[base];}
			}
			else
			{
				return Math.floor(n);
			}
		}
		function resetGame()
		{
			
			items["skellingtons"] = 0
			items["spookySpiders"] = 0
			items["jackOLantern"] = 0
			
			spookieCount = 0;

			gameLoop();
			
			items["skellingtons"] = 0
			items["spookySpiders"] = 0
			items["jackOLantern"] = 0
			
			spookieCount = 0;
		}

		function spookies(e)
		{
			//console.log(e)
			ghosties.push(new ghostie(e.x, e.y,ghostiesId))
			if(!twoSpooky)
			{
				spookieCount += 1 * multiplier;
				//console.log("spooky");
			}
			else
			{
				spookieCount +=1 * multiplier * 2;
			}
					
		}

		function ghostie(x,y, id)
		{
			//console.log(x,y)
			this.x = x += Math.random()*200-100;
			this.y = y;
			this.id = id;
			ghostiesId++;
			this.class = "ghostie";
			this.element = document.createElement("img");
			this.element.src = "creepy.png";
			this.element.class=this.class;
			this.element.id = this.id;

			this.element = document.body.appendChild(this.element);
			this.element.style.position = "absolute";
			this.element.style.left = this.x;
			this.element.style.top = this.y;
			this.element.addEventListener("click", spookies);
			this.element.ondragstart = function() { return false; };

			this.draw = function()
			{

				this.y -= 0.5;
				this.element.style.top= this.y;

			}
		}

		function save()
		{
			localStorage.setItem("spookieCount", spookieCount);
			localStorage.setItem("skellingtons", items["skellingtons"]);
			localStorage.setItem("spookySpiders", items["spookySpiders"]);
			localStorage.setItem("jackOLantern", items["jackOLantern"]);	
		}
		
		function load()
		{
			spookieCount = parseInt(localStorage.getItem("spookieCount"));
			items["skellingtons"] = parseInt(localStorage.getItem("skellingtons"));
			items["spookySpiders"] = parseInt(localStorage.getItem("spookySpiders"));
			items["jackOLantern"] = parseInt(localStorage.getItem("jackOLantern"));

			
			if(isNaN(spookieCount))
			{
				spookieCount = 0;
			}
			
			for(item in items)
			{
				if(isNaN(items[item]))
				{
					items[item] = 0
				}
			}
			gameUpdate();
		}
		
		function buy(item)
		{
			if(item == "jackOLantern")
			{
				if(spookieCount >= itemsCost["jackOLantern"])
				{
					spookieCount = spookieCount - itemsCost["jackOLantern"];
					items["jackOLantern"] += 1;
					if(items["jackOLantern"] % 10 == 0)
					{
						maximumSpookage();
					}
				}
			}
			if(item == "skellington")
			{
				if(spookieCount >= itemsCost["skellingtons"])
				{
					spookieCount = spookieCount - itemsCost["skellingtons"];
					items["skellingtons"] += 1;
					if(items["skellingtons"] % 10 == 0)
					{
						maximumSpookage();
					}
					
				}
			}
			if(item == "spookySpider")
			{
				if(spookieCount >= itemsCost["spookySpiders"])
				{
					spookieCount = spookieCount - itemsCost["spookySpiders"];
					items["spookySpiders"] += 1;
					if(items["spookySpiders"] % 10 == 0)
					{
						maximumSpookage();
					}
				}
			}
			gameUpdate();
		}
		function maximumSpookage()
		{
			document.getElementById("spookyBill").src = "spook.gif"

			document.body.style.background = "#000000"
			document.body.style.color = "#FFFFFF"
			twoSpooky = true;
			timer += 10;
		}
		function gameLoop()
		{
			if(twoSpooky)
			{
				
				
				if(timer > 0)
				{
					timer = timer -1;
					if(timer%2)
					{
						document.getElementById("maximumSpookage").style.color= "#FFFFFF"
					}
					else
					{
						document.getElementById("maximumSpookage").style.color= "#000000"
					}
				}
				else
				{
					twoSpooky = false;
					document.getElementById("spookyBill").src = "spookybill.jpg"
					document.getElementById("maximumSpookage").style.color= "#FFFFFF"
					document.body.style.background = "#FFFFFF";
					document.body.style.color = "#000000";
				}
			}
			spookieCount += sps;
			gameUpdate();
		}
		
		function displayUpdate()
		{

			
			document.getElementById("spookies").innerHTML = prettyNumbers(spookieCount) + " Spookies";
			document.getElementById("spookiesPerSecond").innerHTML = sps + " Spookies Per Second";
			document.getElementById("spookiesPerClick").innerHTML = multiplier + " Spookies Per Click";
			
			document.getElementById("jackOLanternShop").innerHTML = "Buy a Jack O'Lantern for " +itemsCost["jackOLantern"] + " Spookies";
			document.getElementById("skellingtonShop").innerHTML = "Buy a Skellington for " +itemsCost["skellingtons"] + " Spookies";
			document.getElementById("spookySpiderShop").innerHTML = "Buy a Spooky Spider for " +itemsCost["spookySpiders"] + " Spookies";
			
			document.getElementById("jackOLanternNumbers").innerHTML = items["jackOLantern"] + " Jack O'Lanterns";
			document.getElementById("skellingtonNumbers").innerHTML = items["skellingtons"] + " Skellingtons";
			document.getElementById("spookySpiderNumbers").innerHTML = items["spookySpiders"] + " Spooky Spiders";

			for (var i = ghosties.length - 1; i >= 0; i--) {
				if (ghosties[i] != undefined)
				{
					ghosties[i].draw();

					if(ghosties[i].y < 0)
					{
						document.body.removeChild(ghosties[i].element);
						delete ghosties[i]
					}
				}
			};
			requestAnimationFrame(displayUpdate);
			
			
			document.title = Math.round(spookieCount) + " Spookies"
		}
		
		function gameUpdate()
		{	

			itemsCost["jackOLantern"] = 20 + Math.round(20 * Math.pow(items["jackOLantern"],1.09));
			itemsCost["skellingtons"] = 50 + Math.round(50 * Math.pow(items["skellingtons"],1.09));
			itemsCost["spookySpiders"] = 100 + Math.round(100 * Math.pow(items["spookySpiders"],1.09));
			
			sps = items["skellingtons"]*2 + items["spookySpiders"]*4;
			multiplier = 1 + (0.5*items["jackOLantern"]);
		}
		
		window.addEventListener('load',function(){
			document.getElementById("spookyBill").addEventListener("click", spookies);
			document.getElementById("jackOLanternShop").addEventListener("click", function(){buy("jackOLantern");}, false);
			document.getElementById("skellingtonShop").addEventListener("click", function(){buy("skellington");}, false);
			document.getElementById("spookySpiderShop").addEventListener("click", function(){buy("spookySpider");}, false);
			document.getElementById('spookyBill').ondragstart = function() { return false; };
		});
		
		
		var timer = window.setInterval(function(){gameLoop();}, 1000);

		requestAnimationFrame(displayUpdate);
		
	</script>
</body>

</html>